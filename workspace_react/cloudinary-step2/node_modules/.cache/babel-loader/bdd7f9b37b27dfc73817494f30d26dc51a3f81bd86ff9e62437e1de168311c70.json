{"ast":null,"code":"import { getAuth, GoogleAuthProvider /* 구글에서 제공하는 제공자 정보 */, signInWithPopup /* 구글 로그인 이중 화면 띄움 */ } from \"firebase/auth\";\n\n// 클래스 선언\nclass authLogic1212 {\n  // 생성자 함수 - 전역 변수 초기화\n  constructor() {\n    // 바닐라 스크립트에서 같은 이름의 함수를 지원하지 않는다.\n    this.auth = getAuth();\n    this.googleProvider = new GoogleAuthProvider();\n  }\n  // 사용자 정의 함수 구현\n}\n\n// 로그아웃 버튼 클릭시 호출하기\nexport const logout = auth => {\n  return new Promise((resolve, reject) => {\n    // 로그아웃 처리하기\n    auth.signOut().cathe(e => reject(e + \"로그아웃 오류 입니다.\"));\n    localStorage.removeItem(\"mem_id\");\n    resolve();\n  });\n}; //// end of logout\n\nexport const loginGoogle = (auth, googleAuthProvider) => {\n  console.log(\"logoinGoogle 호출 성공\");\n  // console.log(googleAuthProvider);\n\n  return new Promise((resolve, reject) => {\n    signInWithPopup(auth, googleAuthProvider) // 인증이 되는 동안 지연이 발생할 수 있다.\n    .then(result => {\n      // 내가 구글 회원이라면 프로필 정보를 쥐고 있다.\n      console.log(result); // object Object 출력 - 값이 안 보인다.\n      console.log(JSON.stringify(result));\n      const user = result.user; // 여기서 사용되는 user레이블은 구글에서 인증 후에 콜백으로 반환하는 값들 (Object)\n\n      console.log(user.uid);\n      localStorage.setItem(\"uid\", user.uid);\n      resolve(user); // {uid:xxxxxxxxx, displayName: xxxxx, email: xxxxx}\n    }).catch(error => reject(error));\n\n    // 로그아웃 처리하기\n    localStorage.setItem(\"mem_id\", \"googleid\");\n    resolve();\n  });\n}; //// end of logoinGoogle\n\n// 로그인 풀렸을 때 처리 또는 로그인 세션시간이 만료되었을때\nexport const onAuthChange = auth => {\n  return new Promise(resolve => {\n    auth.onAuthStateChanged(user => {\n      resolve(user);\n    }); //// end of onAuthStateChanged - 로그인 상태가 풀렸는지 체크 -> 콜백 함수에 파라미터로 사용자 정보를 줘어준다.\n  }); //// end of Promise\n}; //// end of onAuthChange\n\nexport default authLogic1212; // 외부 js에서 사용할 때 반드시 추가할 것","map":{"version":3,"names":["getAuth","GoogleAuthProvider","signInWithPopup","authLogic1212","constructor","auth","googleProvider","logout","Promise","resolve","reject","signOut","cathe","e","localStorage","removeItem","loginGoogle","googleAuthProvider","console","log","then","result","JSON","stringify","user","uid","setItem","catch","error","onAuthChange","onAuthStateChanged"],"sources":["D:/Java/workspace_react/cloudinary-step2/src/service1212/authLogic1212.js"],"sourcesContent":["import {\r\n  getAuth,\r\n  GoogleAuthProvider /* 구글에서 제공하는 제공자 정보 */,\r\n  signInWithPopup /* 구글 로그인 이중 화면 띄움 */,\r\n} from \"firebase/auth\";\r\n\r\n// 클래스 선언\r\nclass authLogic1212 {\r\n  // 생성자 함수 - 전역 변수 초기화\r\n  constructor() { // 바닐라 스크립트에서 같은 이름의 함수를 지원하지 않는다.\r\n    this.auth = getAuth();\r\n    this.googleProvider  = new GoogleAuthProvider();\r\n  }\r\n  // 사용자 정의 함수 구현\r\n}\r\n\r\n// 로그아웃 버튼 클릭시 호출하기\r\nexport const logout = (auth) => {\r\n  return new Promise((resolve, reject) => {\r\n    // 로그아웃 처리하기\r\n    auth.signOut().cathe((e) => reject(e + \"로그아웃 오류 입니다.\"));\r\n    localStorage.removeItem(\"mem_id\");\r\n    resolve();\r\n  });\r\n}; //// end of logout\r\n\r\nexport const loginGoogle = (auth, googleAuthProvider) => {\r\n  console.log(\"logoinGoogle 호출 성공\");\r\n  // console.log(googleAuthProvider);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    signInWithPopup(auth, googleAuthProvider) // 인증이 되는 동안 지연이 발생할 수 있다.\r\n      .then((result) => {\r\n        // 내가 구글 회원이라면 프로필 정보를 쥐고 있다.\r\n        console.log(result); // object Object 출력 - 값이 안 보인다.\r\n        console.log(JSON.stringify(result));\r\n        const user = result.user; // 여기서 사용되는 user레이블은 구글에서 인증 후에 콜백으로 반환하는 값들 (Object)\r\n\r\n        console.log(user.uid);\r\n        localStorage.setItem(\"uid\", user.uid);\r\n        resolve(user); // {uid:xxxxxxxxx, displayName: xxxxx, email: xxxxx}\r\n      })\r\n      .catch((error) => reject(error));\r\n\r\n    // 로그아웃 처리하기\r\n    localStorage.setItem(\"mem_id\", \"googleid\");\r\n    resolve();\r\n  });\r\n}; //// end of logoinGoogle\r\n\r\n// 로그인 풀렸을 때 처리 또는 로그인 세션시간이 만료되었을때\r\nexport const onAuthChange = (auth) => {\r\n  return new Promise((resolve) => {\r\n    auth.onAuthStateChanged((user) => {\r\n      resolve(user);\r\n    }); //// end of onAuthStateChanged - 로그인 상태가 풀렸는지 체크 -> 콜백 함수에 파라미터로 사용자 정보를 줘어준다.\r\n  }); //// end of Promise\r\n}; //// end of onAuthChange\r\n\r\nexport default authLogic1212; // 외부 js에서 사용할 때 반드시 추가할 것\r\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,kBAAkB,CAAC,wBACnBC,eAAe,CAAC,6BACX,eAAe;;AAEtB;AACA,MAAMC,aAAa,CAAC;EAClB;EACAC,WAAWA,CAAA,EAAG;IAAE;IACd,IAAI,CAACC,IAAI,GAAGL,OAAO,CAAC,CAAC;IACrB,IAAI,CAACM,cAAc,GAAI,IAAIL,kBAAkB,CAAC,CAAC;EACjD;EACA;AACF;;AAEA;AACA,OAAO,MAAMM,MAAM,GAAIF,IAAI,IAAK;EAC9B,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC;IACAL,IAAI,CAACM,OAAO,CAAC,CAAC,CAACC,KAAK,CAAEC,CAAC,IAAKH,MAAM,CAACG,CAAC,GAAG,cAAc,CAAC,CAAC;IACvDC,YAAY,CAACC,UAAU,CAAC,QAAQ,CAAC;IACjCN,OAAO,CAAC,CAAC;EACX,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;;AAEH,OAAO,MAAMO,WAAW,GAAGA,CAACX,IAAI,EAAEY,kBAAkB,KAAK;EACvDC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACjC;;EAEA,OAAO,IAAIX,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtCR,eAAe,CAACG,IAAI,EAAEY,kBAAkB,CAAC,CAAC;IAAA,CACvCG,IAAI,CAAEC,MAAM,IAAK;MAChB;MACAH,OAAO,CAACC,GAAG,CAACE,MAAM,CAAC,CAAC,CAAC;MACrBH,OAAO,CAACC,GAAG,CAACG,IAAI,CAACC,SAAS,CAACF,MAAM,CAAC,CAAC;MACnC,MAAMG,IAAI,GAAGH,MAAM,CAACG,IAAI,CAAC,CAAC;;MAE1BN,OAAO,CAACC,GAAG,CAACK,IAAI,CAACC,GAAG,CAAC;MACrBX,YAAY,CAACY,OAAO,CAAC,KAAK,EAAEF,IAAI,CAACC,GAAG,CAAC;MACrChB,OAAO,CAACe,IAAI,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CACDG,KAAK,CAAEC,KAAK,IAAKlB,MAAM,CAACkB,KAAK,CAAC,CAAC;;IAElC;IACAd,YAAY,CAACY,OAAO,CAAC,QAAQ,EAAE,UAAU,CAAC;IAC1CjB,OAAO,CAAC,CAAC;EACX,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;;AAEH;AACA,OAAO,MAAMoB,YAAY,GAAIxB,IAAI,IAAK;EACpC,OAAO,IAAIG,OAAO,CAAEC,OAAO,IAAK;IAC9BJ,IAAI,CAACyB,kBAAkB,CAAEN,IAAI,IAAK;MAChCf,OAAO,CAACe,IAAI,CAAC;IACf,CAAC,CAAC,CAAC,CAAC;EACN,CAAC,CAAC,CAAC,CAAC;AACN,CAAC,CAAC,CAAC;;AAEH,eAAerB,aAAa,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}